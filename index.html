<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para mi Ivana ❤️</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; touch-action: none; }
        canvas { display: block; }
        
        /* Mensaje Principal (Fijo al frente) */
        #mensaje-central {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 90%;
            z-index: 100;
            pointer-events: none;
        }

        h1 {
            font-size: 1.8rem;
            color: #ff0000;
            text-shadow: 0 0 15px #ff0000, 0 0 30px #ff0000;
            margin: 0;
            animation: latido 2.5s infinite ease-in-out;
        }

        @keyframes latido {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body>

    <div id="mensaje-central">
        <h1>Te amo mucho Ivana, eres el amor de mi vida ❤️</h1>
    </div>

    <audio id="musica" loop>
        <source src="cancion.mp3" type="audio/mpeg">
    </audio>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, starGroup;
        let isDragging = false;
        let previousMousePosition = { x: 0, y: 0 };
        let zoom = 5;

        const textos = [
            "Me encantas bebé", "Te adoro", "Eres mi vida", "Mi cielito", "I found you", "Mi reina",
            "Casemonos", "Coqueta", "Mi amor", "Mi tesoro", "Ivanita", "Mi bebé",
            "La madre de mis hijos", "Mi princesa", "Muerdeme", "Eres mi estrella",
            "Mi solecito", "Mi lindura", "Te amo x100", "Feliz Valentín", "Te extraño",
            "Tu cinturita", "Muak", "Besemonos", "Te amo", "Mi florcita", "Mi maestra", "Mi coqueta"
        ];

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            starGroup = new THREE.Group();
            scene.add(starGroup);

            // 1. GALAXIA AZUL 3D
            const geometry = new THREE.BufferGeometry();
            const count = 20000;
            const positions = new Float32Array(count * 3);
            for(let i=0; i < count * 3; i++) {
                positions[i] = (Math.random() - 0.5) * 20;
            }
            geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
            const material = new THREE.PointsMaterial({ 
                size: 0.02, 
                color: 0x00aaff, // Azul Galaxia
                transparent: true, 
                opacity: 0.8 
            });
            const stars = new THREE.Points(geometry, material);
            starGroup.add(stars);

            // 2. MENSAJES EN 3D (Textos flotantes)
            textos.forEach(t => {
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = 256;
                canvas.height = 64;
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                ctx.font = 'Bold 24px Arial';
                ctx.fillText(t, 10, 40);

                const texture = new THREE.CanvasTexture(canvas);
                const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
                const sprite = new THREE.Sprite(spriteMaterial);
                
                // Posiciones aleatorias en el espacio 3D
                sprite.position.set(
                    (Math.random() - 0.5) * 10,
                    (Math.random() - 0.5) * 10,
                    (Math.random() - 0.5) * 10
                );
                sprite.scale.set(1, 0.25, 1);
                starGroup.add(sprite);
            });

            camera.position.z = zoom;

            // --- INTERACCIÓN ---
            const start = (x, y) => { 
                isDragging = true; 
                previousMousePosition = { x, y };
                document.getElementById('musica').play().catch(() => {});
            };

            const move = (x, y) => {
                if (isDragging) {
                    starGroup.rotation.y += (x - previousMousePosition.x) * 0.005;
                    starGroup.rotation.x += (y - previousMousePosition.y) * 0.005;
                    previousMousePosition = { x, y };
                }
            };

            // Zoom (Mouse y Pellizco)
            window.addEventListener('wheel', e => {
                zoom += e.deltaY * 0.005;
                zoom = Math.max(1, Math.min(15, zoom));
                camera.position.z = zoom;
            });

            let initialDist = 0;
            window.addEventListener('touchstart', e => {
                if (e.touches.length === 1) start(e.touches[0].clientX, e.touches[0].clientY);
                else initialDist = 0;
            });

            window.addEventListener('touchmove', e => {
                if (e.touches.length === 2) {
                    let dist = Math.hypot(e.touches[0].pageX - e.touches[1].pageX, e.touches[0].pageY - e.touches[1].pageY);
                    if (initialDist > 0) {
                        zoom += (initialDist - dist) * 0.01;
                        zoom = Math.max(1, Math.min(15, zoom));
                        camera.position.z = zoom;
                    }
                    initialDist = dist;
                } else {
                    move(e.touches[0].clientX, e.touches[0].clientY);
                }
            });

            window.addEventListener('mousedown', e => start(e.clientX, e.clientY));
            window.addEventListener('mousemove', e => move(e.clientX, e.clientY));
            window.addEventListener('mouseup', () => isDragging = false);
            window.addEventListener('touchend', () => { isDragging = false; initialDist = 0; });

            animate();
        }

        function animate() {
            requestAnimationFrame(animate);
            if(!isDragging) {
                starGroup.rotation.y += 0.0007;
            }
            renderer.render(scene, camera);
        }

        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        init();
    </script>
</body>
</html>
